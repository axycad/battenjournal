@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    font-family: Inter, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  
  body {
    @apply bg-bg-primary text-text-primary;
  }
  
  /* Generous line height for readability under stress */
  p, li, span {
    @apply leading-relaxed;
  }
  
  /* Remove default focus outlines, apply custom */
  *:focus {
    @apply outline-none ring-2 ring-accent-focus ring-offset-2;
  }
  
  /* No italics for emotion per UI spec */
  em {
    @apply not-italic font-medium;
  }
}

@layer components {
  /* Primary button */
  .btn-primary {
    @apply h-button px-sm bg-accent-primary text-white rounded-md font-medium;
    @apply transition-colors duration-fast;
    @apply hover:opacity-90;
    @apply disabled:opacity-50 disabled:cursor-not-allowed;
  }
  
  /* Secondary button */
  .btn-secondary {
    @apply h-button px-sm border border-accent-primary text-accent-primary rounded-md font-medium;
    @apply transition-colors duration-fast;
    @apply hover:bg-accent-primary/10;
    @apply disabled:opacity-50 disabled:cursor-not-allowed;
  }
  
  /* Text button */
  .btn-text {
    @apply h-button px-sm text-accent-primary font-medium;
    @apply transition-colors duration-fast;
    @apply hover:underline;
    @apply disabled:opacity-50 disabled:cursor-not-allowed;
  }
  
  /* Input fields - borderless or subtle per UI spec */
  .input-field {
    @apply w-full px-sm py-3 bg-white border border-divider rounded-sm;
    @apply text-body text-text-primary;
    @apply placeholder:text-text-secondary;
    @apply focus:border-accent-primary;
  }
  
  /* Section divider */
  .divider {
    @apply border-t border-divider;
  }
  
  /* Screen title */
  .screen-title {
    @apply text-title-lg font-medium text-text-primary;
  }
  
  /* Section header */
  .section-header {
    @apply text-title-md font-medium text-text-primary;
  }
  
  /* Meta text */
  .meta-text {
    @apply text-meta text-text-secondary;
  }
  
  /* Critical label (allergies) */
  .critical-label {
    @apply text-semantic-critical font-medium;
  }
  
  /* Save toast */
  .save-toast {
    @apply text-semantic-success text-meta;
  }
}

@layer utilities {
  /* Mobile-specific optimizations */

  /* Disable tap highlight on mobile browsers */
  * {
    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;
  }

  /* Smooth scrolling for mobile */
  html {
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
  }

  /* Prevent text selection on interactive elements */
  button, a, .btn-primary, .btn-secondary, .btn-text {
    -webkit-user-select: none;
    user-select: none;
  }

  /* Enable text selection on content areas */
  p, span:not(button span), div:not(button div) {
    -webkit-user-select: text;
    user-select: text;
  }

  /* Minimum touch target size for accessibility (44x44px iOS, 48x48px Android) */
  .touch-target {
    min-height: 48px;
    min-width: 48px;
  }

  /* Safe area support for content */
  .safe-area-padding {
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
  }

  /* Disable zoom on double-tap for form inputs (prevents iOS zoom) */
  input, textarea, select {
    font-size: 16px; /* Prevents iOS zoom on focus */
  }

  /* Optimize for mobile viewport */
  @media (max-width: 768px) {
    /* Slightly larger touch targets on small screens */
    .btn-primary, .btn-secondary {
      min-height: 48px;
    }

    /* Full-width buttons on mobile */
    .btn-mobile-full {
      @apply w-full;
    }
  }
}
